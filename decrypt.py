import os
from cryptography.fernet import Fernet
from wordle import play


def main():
    files = []

    for file in os.listdir(os.getcwd()):
        if file.endswith('.txt'):
            files.append(file)

    key_list = []
    with open("thekey.key", "rb") as f:
        keys_content = f.read().decode().splitlines()
        # Add each key to the list
        for key in keys_content:
            key_list.append(key)

    solved = play()

    if solved:
        print("Congratulations! You've solved the wordle!")
        for i, file in enumerate(files):
            key = key_list[i]
            fernet = Fernet(key)

            with open(file, "rb") as f:
                data = f.read()
                data = fernet.decrypt(data)
            with open(file, "wb") as f:
                f.write(data)
