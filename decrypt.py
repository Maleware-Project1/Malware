import os
from cryptography.fernet import Fernet
from wordle import play



def main():
    solvedWordle = play()
    if solvedWordle:
        key = getKey()
        decrypt(key)


def getKey():
    #key will be the first line in thekey.key file
    with open("thekey.key", "rb") as f:
        key = f.read().splitlines()[0]
    print(key)


def decrypt(key):
    #Get all file
    files = []
    for file in os.listdir(os.getcwd()):            #target will be the current directory of running the script
        if file.endswith('.txt'):                   # all .txt files will be encrypted
            files.append(file)

    #Decrypt each file
    fernet = Fernet(key)
    for file in files:
        with open(file, "rb") as f:
            data = f.read()
        decrypted = fernet.decrypt(data)
        with open(file, "wb") as f:
            f.write(decrypted)


